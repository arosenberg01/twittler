<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"></script>
  </head>
  <body>
    <script>

    $(document).ready(function(){  
      var $body = $('body');
      var tweeted = 0;
      var maxTweets = 20;
      $body.html('');

      var showTweet = function() {
        var tweet = streams.home[streams.home.length-1];
        var $tweet = $('<div></div>');
        var tweetTimeFromNow = moment(tweet.created_at).fromNow();
        $tweet.text('@' + tweet.user + ': ' + tweet.message + " - " + tweetTimeFromNow);
        $tweet.prependTo($body);
        tweeted++;
      }

      var removeTweet = function() {
        var $divs = $('div');
        $divs[$divs.length-1].remove();
      }
      
      var startTweets = setInterval(function () {
        showTweet();
         if (tweeted > maxTweets) {
          removeTweet();
        }
      }, 3000);

    });

    </script>
  </body>
</html>


